<div id="tasks-component">
  <ngb-alert *ngIf="error" [type]="'danger'" (closed)="error = ''">
    <i class="fa fa-exclamation-triangle"></i>
    {{ error }}
    &nbsp;
  </ngb-alert>
  <h4 class="mt-3">Authorize emails to register</h4>
  <div class="row mt-3">
    <div class="col-10">
      <form [formGroup]="form" (ngSubmit)="onSubmit()" method="POST">
        <div class="form-group">
          <label class="form-label" for="accessEmail">Email</label>
          <input
            type="email"
            class="form-control"
            id="accessEmail"
            placeholder="example@mail.com"
            formControlName="email"
            [ngClass]="{ 'is-invalid': submitted && f.email.errors }"
          />
          <div *ngIf="submitted && f.email.errors" class="invalid-feedback">
            <div *ngIf="f.email.errors.required">email is required</div>
            <div *ngIf="f.email.errors.email">is not a valid email</div>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label" for="accessTtl"
            >Time To Live (minutes)</label
          >
          <input
            type="number"
            min="5"
            max="1440"
            class="form-control"
            id="accessTtl"
            formControlName="ttl"
            [ngClass]="{ 'is-invalid': submitted && f.ttl.errors }"
          />
          <div *ngIf="submitted && f.ttl.errors" class="invalid-feedback">
            <div *ngIf="f.ttl.errors.required">this field is required</div>
            <div *ngIf="f.ttl.errors.min">
              the minimun is {{ f.ttl.errors.min.min }}
            </div>
            <div *ngIf="f.ttl.errors.max">
              the maximum is {{ f.ttl.errors.max.max }}
            </div>
          </div>
        </div>
        <button type="submit" class="btn btn-outline-dark mt-3">Send</button>
        <div *ngIf="message" class="alert alert-success mt-3 mb-0">
          {{ message }}
        </div>
      </form>
    </div>
  </div>
</div>
